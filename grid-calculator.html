<!DOCTYPE html>
<html lang="en">

<head>

  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Grid Calculator</title>
  <link rel='shortcut icon' type='image/x-icon' href='assets/images/favicon.png' />
  <script src="https://cdn.tailwindcss.com"></script>

  <style>
    @font-face {
      font-family: "Mona Sans";
      src: url("assets/fonts/MonaSans-VariableFont_wdth.ttf") format("truetype");
      font-weight: 200 900;
      font-style: normal;
    }

    @font-face {
      font-family: "Mona Sans";
      src: url("assets/fonts/MonaSans-Italic-VariableFont_wdth.ttf") format("truetype");
      font-weight: 200 900;
      font-style: italic;
    }

    body {
      font-family: 'Mona Sans', sans-serif;
    }

    /* Mode Switch */
    .mode-btn {
      padding: 6px 14px;
      font-size: 12px;
      border-radius: 4px;
      color: #374151;
    }

    .mode-btn.active {
      background: #111827;
      color: #fff;
    }

    /* Preview */
    .preview {
      width: 100%;
      height: 120px;
      background: #fafafa;
      border: 1px solid #d1d5db;
      border-radius: 10px;
      padding: 4px;
      display: flex;
      gap: 3px;
    }

    .preview.vertical {
      height: 300px;
      flex-direction: column;
    }

    /* Grid Segments */
    .segment {
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 6px;
      font-size: 11px;
      color: #374151;
      min-width: 20px;
    }

    /* Gray Scale */
    .margin {
      background: #f3f4f6;
    }

    .column {
      background: #e5e7eb;
    }

    .row {
      background: #e5e7eb;
    }

    .gutter {
      background: #ffffff;
    }

    /* Inputs */
    input {
      background: #f3f4f6;
      border: 1px solid #d1d5db;
      border-radius: 4px;
      padding: 2px 4px !important;
      font-size: 14px !important;
      width: 80px;
    }

    label {
      font-size: 14px;
      color: #6b7280;
    }
  </style>
</head>

<body class="bg-gray-50">
  <div class="w-full px-4 py-4">

    <h1 class="text-lg font-semibold text-center text-gray-900 mb-4">
      Grid Calculator
    </h1>

    <!-- TOOLBAR (TABS + INPUTS IN ONE ROW) -->
    <div
      class="flex items-center gap-6 border border-gray-300 rounded-md p-2 bg-white mb-6 flex-wrap justify-between overflow-x-auto">

      <!-- MODE SWITCH -->
      <div class="inline-flex border border-gray-300 rounded-md p-0.5 bg-gray-50 shrink-0">
        <button class="mode-btn active" data-mode="columns">Columns</button>
        <button class="mode-btn" data-mode="rows">Rows</button>
      </div>

      <!-- COLUMN INPUTS -->
      <div id="columnInputs" class="flex flex-wrap items-center gap-3">
        <div class="flex gap-2 items-center shrink-0">
          <label>Target</label>
          <input id="targetWidth" type="number" value="1400">
        </div>

        <div class="flex gap-2 items-center shrink-0">
          <label>Cols</label>
          <input id="cols" type="number" value="12">
        </div>

        <div class="flex gap-2 items-center shrink-0">
          <label>Gutter</label>
          <input id="gutterH" type="number" value="24">
        </div>

        <div class="flex gap-2 items-center shrink-0">
          <label>Margin</label>
          <input id="marginH" type="number" value="24">
        </div>
      </div>

      <!-- ROW INPUTS -->
      <div id="rowInputs" class="hidden flex flex-wrap items-center gap-3">
        <div class="flex gap-2 items-center shrink-0">
          <label>Target</label>
          <input id="targetHeight" type="number" value="900">
        </div>

        <div class="flex gap-2 items-center shrink-0">
          <label>Rows</label>
          <input id="rows" type="number" value="8">
        </div>

        <div class="flex gap-2 items-center shrink-0">
          <label>Gutter</label>
          <input id="gutterV" type="number" value="24">
        </div>

        <div class="flex gap-2 items-center shrink-0">
          <label>Margin</label>
          <input id="marginV" type="number" value="24">
        </div>
      </div>

      <!-- RESULT -->
      <div class="text-sm text-gray-700 whitespace-nowrap shrink-0">
        Target:
        <span id="targetOut">0</span>px |
        Page:
        <span id="pageOut">0</span>px |
        <span id="unitLabel">Column</span>:
        <span id="unitOut">0</span>px
      </div>

    </div>

    <!-- PREVIEWS -->
    <div id="columnSection">
      <div class="preview" id="horizontalPreview"></div>
    </div>

    <div id="rowSection" class="hidden">
      <div class="preview vertical" id="verticalPreview"></div>
    </div>

  </div>


  <script>
    const modeButtons = document.querySelectorAll('.mode-btn');
    let viewMode = 'columns';

    modeButtons.forEach(btn => {
      btn.onclick = () => {
        modeButtons.forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        viewMode = btn.dataset.mode;
        updatePreview();
      };
    });

    function labelHTML(v) {
      return v > 0 ? v : '';
    }

    function updatePreview() {
      columnInputs.classList.toggle('hidden', viewMode === 'rows');
      rowInputs.classList.toggle('hidden', viewMode === 'columns');

      columnSection.classList.toggle('hidden', viewMode === 'rows');
      rowSection.classList.toggle('hidden', viewMode === 'columns');

      unitLabel.textContent = viewMode === 'columns' ? 'Column' : 'Row';

      if (viewMode === 'columns') {
        const t = +targetWidth.value;
        const c = +cols.value;
        const g = +gutterH.value;
        const m = +marginH.value;

        const colW = Math.floor((t - 2 * m - (c - 1) * g) / c);
        const pageW = c * colW + (c - 1) * g + 2 * m;

        targetOut.textContent = t;
        unitOut.textContent = colW;
        pageOut.textContent = pageW;

        const scale = horizontalPreview.clientWidth / pageW;

        horizontalPreview.innerHTML = `
   <div class="segment margin" style="width:${m * scale}px">${labelHTML(m)}</div>
   ${Array.from({ length: c }).map((_, i) => `
    <div class="segment column" style="width:${colW * scale}px">${labelHTML(colW)}</div>
    ${i < c - 1 ? `<div class="segment gutter" style="width:${g * scale}px">${labelHTML(g)}</div>` : ''}
   `).join('')}
   <div class="segment margin" style="width:${m * scale}px">${labelHTML(m)}</div>
  `;
      }

      if (viewMode === 'rows') {
        const t = +targetHeight.value;
        const r = +rows.value;
        const g = +gutterV.value;
        const m = +marginV.value;

        const rowH = Math.floor((t - 2 * m - (r - 1) * g) / r);
        const pageH = r * rowH + (r - 1) * g + 2 * m;

        targetOut.textContent = t;
        unitOut.textContent = rowH;
        pageOut.textContent = pageH;

        const scale = verticalPreview.clientHeight / pageH;

        verticalPreview.innerHTML = `
   <div class="segment margin" style="height:${m * scale}px">${labelHTML(m)}</div>
   ${Array.from({ length: r }).map((_, i) => `
    <div class="segment row" style="height:${rowH * scale}px">${labelHTML(rowH)}</div>
    ${i < r - 1 ? `<div class="segment gutter" style="height:${g * scale}px">${labelHTML(g)}</div>` : ''}
   `).join('')}
   <div class="segment margin" style="height:${m * scale}px">${labelHTML(m)}</div>
  `;
      }
    }

    document.addEventListener('input', updatePreview);
    window.addEventListener('resize', updatePreview);
    updatePreview();
  </script>

</body>

</html>